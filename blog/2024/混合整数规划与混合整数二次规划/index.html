<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> 混合整数规划与混合整数二次规划 | Yinchuan Wang </title> <meta name="author" content="Yinchuan Wang"> <meta name="description" content="MIP, MIQP介绍和实例应用"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/cartoon_icon.png?7c1fbbf2e3403c73b6deee354fec38d1"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://sdwyc.github.io/blog/2024/%E6%B7%B7%E5%90%88%E6%95%B4%E6%95%B0%E8%A7%84%E5%88%92%E4%B8%8E%E6%B7%B7%E5%90%88%E6%95%B4%E6%95%B0%E4%BA%8C%E6%AC%A1%E8%A7%84%E5%88%92/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Yinchuan</span> <span class="font-weight-bold">Wang</span> </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Home </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publication </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">混合整数规划与混合整数二次规划</h1> <p class="post-meta"> Created in July 26, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/optimization"> <i class="fa-solid fa-hashtag fa-sm"></i> Optimization</a>   ·   <a href="/blog/category/math"> <i class="fa-solid fa-tag fa-sm"></i> math</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="引言">引言</h1> <p>在数值优化领域中，混合整数规划（Mixed Integer Programming, MIP）和混合整数二次规划（Mixed Integer Quadratic Programming, MIQP）是两类重要的优化模型。本文将对这两种规划的基本概念、常用求解方法进行介绍，并通过实例分析帮助大家更好地理解这些规划问题。</p> <h1 id="一混合整数规划mip或milp基本概念">一、混合整数规划（MIP或MILP）基本概念</h1> <p>混合整数规划问题是指在优化过程中，部分优化变量必须取整数值，其他变量则可以取连续值的一类优化问题。</p> <p>典型的MIP问题形式如下：</p> <table> <thead> <tr> <th>目标方程：</th> <th>\(\min \ \mathbf{c} ^T \mathbf{x}\)</th> </tr> </thead> <tbody> <tr> <td>约束：</td> <td>\(\mathbf{A} \mathbf{x} \le\mathbf{b}\) (线性约束)</td> </tr> <tr> <td> </td> <td>\(\mathbf{x} _l\le \mathbf{x} \le \mathbf{x} _h\)(边界约束)</td> </tr> <tr> <td> </td> <td>\(\mathbf{x}_i​∈Z\), \(\mathbf{x}_j​∈R\) (for some i, others j) （整数约束）</td> </tr> </tbody> </table> <p>这里，\(\mathbf{c}\)和\(\mathbf{x}\) 是向量，\(\mathbf{A}\)是矩阵，\(\mathbf{b}\)是约束条件。换句话说，混合整数规划的目标函数与线性规划不同的是，优化变量的定义域可能是整数，这就给求解带来了极大的难度。</p> <h1 id="二混合整数二次规划基本概念">二、混合整数二次规划基本概念</h1> <p>混合整数二次规划是混合整数规划的扩展，其目标函数是一个二次函数，而约束条件通常为一次形式。</p> <p>典型的MIQP问题形式如下：</p> <table> <thead> <tr> <th>目标方程：</th> <th>\(\min \ \mathbf{x}^{T}\mathbf{Q}\mathbf{x}+ \mathbf{c} ^T \mathbf{x}\)</th> </tr> </thead> <tbody> <tr> <td>约束：</td> <td>\(\mathbf{A} \mathbf{x} \le\mathbf{b}\) (线性约束)</td> </tr> <tr> <td> </td> <td>\(\mathbf{x} _l\le \mathbf{x} \le \mathbf{x} _h\)(边界约束)</td> </tr> <tr> <td> </td> <td>\(\mathbf{x}_i​∈Z\), \(\mathbf{x}_j​∈R\) (for some i, others j) （整数约束）</td> </tr> </tbody> </table> <p>上述变量定义与MIP完全相同，可以看到MIQP其实就是再MIP的目标函数的基础上，加上了一个二次项。</p> <h1 id="三常见求解方法">三、常见求解方法</h1> <h2 id="1-分支定界法bnb最常用">1. 分支定界法BnB（最常用）</h2> <p>分支定界法是求解MIP和MIQP问题的经典方法之一。其基本思想是将问题分解为一系列子问题，通过构建一个分支树来逐步逼近最优解。分支定界法主要包括三个步骤：分支、定界和剪枝。简单说一下基于LP的BnB方法：</p> <p>首先，对初始的MILP删除所有整数约束，得到原MILP的线性规划松弛。接下来，求解这个线性规划松弛（LP）。如果得到的解恰好满足所有整数约束，那么这个解就是原始MILP的最优解，运算终止。如果解没有满足所有整数约束（这种情况较为常见），则需要选择某个整数约束实际上得到小数值的变量进行“分支”。为了便于说明，假设这个变量是x，其在LP解中的值是5.7。我们可以通过施加\(x≤5.0\)和\(x≥6.0\)的限制来排除该值5.7。</p> <p>如果用\(P\)表示原MILP问题，用\(P_1\)表示新的MILP（增加了\(x≤5.0\)的约束），用\(P_2\)表示新的MILP（增加了\(x≥6.0\)的约束）。变量\(x\)被称为分支变量，我们在\(x\)上进行了分支，产生了两个子MILP \(P_1\)和 \(P_2\)。显然，如果我们能够求解$P_1$和$P_2$的最优解，那么其中较好的解就是原始问题\(P\)的最优解。</p> <p>通过这种方式，我们用两个更简单（更少整数约束）的MILP取代了\(P\)。我们现在将相同的思想应用于这两个子MILP，并在必要时选择新的分支变量。这样生成了所谓的搜索树。搜索过程生成的MILP称为树的节点，\(P\)为根节点。叶子节点是尚未分支的所有节点。如果所有叶节点的解都满足原MILP的整数约束，那么原始MILP问题就得到了求解。</p> <h2 id="2-割平面法cutting-plane">2. 割平面法（Cutting Plane）</h2> <p>割平面法通过添加额外的约束条件（即割平面）来缩小可行解空间，从而更快地找到最优解。对于MIP和MIQP问题，可以通过不断添加有效的割平面来逼近整数解。</p> <p>割平面通常认为是MIP中提升计算效率的最重要技巧。其基本思想为：思想是通过去除一些非整数解，就想MIP-based presolve一样，达到tighten formulation的目的。割平面不像branching，branching会产生两个子问题(两个分支)，cutting plane只是切掉一些边角(如下图)，不会产生2个MIP。</p> <h2 id="3-启发式算法heuristic">3. 启发式算法（Heuristic）</h2> <p>启发式算法是一类通过经验和启发信息来快速找到满意解的方法。常见的启发式算法包括遗传算法、模拟退火算法和粒子群优化算法。这些方法通常不能保证找到全局最优解，但可以在较短时间内找到质量较好的解。</p> <h2 id="4-混合算法hybrid-algorithms">4. 混合算法（Hybrid Algorithms）</h2> <p>混合算法结合了多种求解方法的优点，以期提高求解效率和解的质量。例如，可以将启发式算法与分支定界法结合，利用启发式算法快速找到初始解，然后通过分支定界法进行精细优化等等。</p> <h1 id="四实例代码求解">四、实例代码求解</h1> <p>本节我们举一个简单的生产实例，来说明如何使用Python的<strong>Pulp</strong>库进行MIP和MIQP问题求解，问题描述如下:</p> <h2 id="1-生产计划问题milp问题"><strong>1. 生产计划问题（MILP问题）</strong></h2> <p>假设某工厂生产两种产品产品\(a\)和产品\(b\)，每种产品都有其生产成本和销售利润，其中：</p> <ul> <li>产品\(a\)的生产成本为10元，销售价格为15元。</li> <li>产品\(b\)的生产成本为20元，销售价格为30元。</li> </ul> <p>该工厂的生产能力和原材料有限，假设：</p> <ul> <li>每月生产能力为70单位。</li> <li>每月原材料限制为150单位，生产产品\(a\)消耗1单位原材料，生产产品\(b\)消耗3单位原材料。</li> </ul> <p>问题一： 如何决定每种产品数量，以实现最大化利润？</p> <ul> <li> <p>问题分析：</p> <p>从问题中，我们可以看出，待优化的决策变量为产品\(a\)和产品\(b\)的数量，用\(x_1\)和\(x_2\)表示，其中\(x_1\)和\(x_2\)必须取整数值，这个问题可以建模为一个MIP或MILP问题。</p> <p>其中，我们的目标函数为：</p> \[\max {(15-10)x_1 + (30-20)x_2}\] <p>约束为：</p> \[\begin{array}{c} x_1+x_2 \le 70 \\ x_1+3x_2 \le 150 \\ x_1, x_2 \in Z^{+} \end{array}\] </li> </ul> <h3 id="python求解代码基于pulp库">Python求解代码（基于Pulp库）</h3> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">pulp</span> <span class="k">as</span> <span class="n">pl</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="k">def</span> <span class="nf">solver_main</span><span class="p">():</span>

    <span class="n">ProbLp</span><span class="o">=</span><span class="n">pl</span><span class="p">.</span><span class="nc">LpProblem</span><span class="p">(</span><span class="sh">"</span><span class="s">ProbLp</span><span class="sh">"</span><span class="p">,</span><span class="n">sense</span><span class="o">=</span><span class="n">pl</span><span class="p">.</span><span class="n">LpMaximize</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">ProbLp</span><span class="p">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">x1</span><span class="o">=</span><span class="n">pl</span><span class="p">.</span><span class="nc">LpVariable</span><span class="p">(</span><span class="sh">'</span><span class="s">x_1</span><span class="sh">'</span><span class="p">,</span><span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">upBound</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">cat</span><span class="o">=</span><span class="sh">'</span><span class="s">Integer</span><span class="sh">'</span><span class="p">)</span>
    <span class="n">x2</span><span class="o">=</span><span class="n">pl</span><span class="p">.</span><span class="nc">LpVariable</span><span class="p">(</span><span class="sh">'</span><span class="s">x_2</span><span class="sh">'</span><span class="p">,</span><span class="n">lowBound</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">upBound</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">cat</span><span class="o">=</span><span class="sh">'</span><span class="s">Integer</span><span class="sh">'</span><span class="p">)</span>
 
    <span class="n">ProbLp</span><span class="o">+=</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">x1</span><span class="o">+</span><span class="mi">10</span><span class="o">*</span><span class="n">x2</span><span class="p">)</span> <span class="c1"># Add Objective
</span>    <span class="c1"># Add Constraints
</span>    <span class="n">ProbLp</span><span class="o">+=</span><span class="p">(</span><span class="n">x1</span><span class="o">+</span><span class="n">x2</span><span class="o">&lt;=</span><span class="mi">70</span><span class="p">)</span> 
    <span class="n">ProbLp</span><span class="o">+=</span><span class="p">(</span><span class="n">x1</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">x2</span><span class="o">&lt;=</span><span class="mi">150</span><span class="p">)</span>
    <span class="n">ProbLp</span><span class="p">.</span><span class="nf">solve</span><span class="p">()</span>
    <span class="c1"># Log for solver
</span>    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Shan Status:</span><span class="sh">"</span><span class="p">,</span> <span class="n">pl</span><span class="p">.</span><span class="n">LpStatus</span><span class="p">[</span><span class="n">ProbLp</span><span class="p">.</span><span class="n">status</span><span class="p">])</span> 
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Optimal objective value</span><span class="sh">"</span><span class="p">,</span> <span class="n">pl</span><span class="p">.</span><span class="nf">value</span><span class="p">(</span><span class="n">ProbLp</span><span class="p">.</span><span class="n">objective</span><span class="p">))</span> 
    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ProbLp</span><span class="p">.</span><span class="nf">variables</span><span class="p">():</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="sh">"</span><span class="s">=</span><span class="sh">"</span><span class="p">,</span> <span class="n">v</span><span class="p">.</span><span class="n">varValue</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">'</span><span class="s">__main__</span><span class="sh">'</span><span class="p">:</span>
    <span class="nf">solver_main</span><span class="p">()</span>
</code></pre></div></div> <p>执行脚本，求得最优解：\(x_1=30，x_2=40\)，输出如下:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Welcome to the CBC MILP Solver
Version: 2.10.3
Build Date: Dec 15 2019

<span class="nb">command </span>line - D:<span class="se">\A</span>naconda3<span class="se">\e</span>nvs<span class="se">\t</span>orch_env<span class="se">\l</span>ib<span class="se">\s</span>ite-packages<span class="se">\p</span>ulp<span class="se">\s</span>olverdir<span class="se">\c</span>bc<span class="se">\w</span><span class="k">in</span><span class="se">\6</span>4<span class="se">\c</span>bc.exe C:<span class="se">\U</span>sers<span class="se">\A</span>DMINI~1<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\T</span>emp<span class="se">\7</span>a689790a63c4d0bbd42e787d4d055db-pulp.mps <span class="nt">-max</span> <span class="nt">-timeMode</span> elapsed <span class="nt">-branch</span> <span class="nt">-printingOptions</span> all <span class="nt">-solution</span> C:<span class="se">\U</span>sers<span class="se">\A</span>DMINI~1<span class="se">\A</span>ppData<span class="se">\L</span>ocal<span class="se">\T</span>emp<span class="se">\7</span>a689790a63c4d0bbd42e787d4d055db-pulp.sol 
<span class="o">(</span>default strategy 1<span class="o">)</span>
At line 2 NAME          MODEL
At line 3 ROWS
At line 7 COLUMNS
At line 18 RHS
At line 21 BOUNDS
At line 24 ENDATA
Problem MODEL has 2 rows, 2 columns and 4 elements
Coin0008I MODEL <span class="nb">read </span>with 0 errors
Option <span class="k">for </span>timeMode changed from cpu to elapsed
Continuous objective value is 550 - 0.00 seconds
Cgl0004I processed model has 2 rows, 2 columns <span class="o">(</span>2 integer <span class="o">(</span>0 of which binary<span class="o">))</span> and 4 elements
Cutoff increment increased from 1e-05 to 4.9999
Cbc0012I Integer solution of <span class="nt">-550</span> found by DiveCoefficient after 0 iterations and 0 nodes <span class="o">(</span>0.00 seconds<span class="o">)</span> 
Cbc0001I Search completed - best objective <span class="nt">-550</span>, took 0 iterations and 0 nodes <span class="o">(</span>0.00 seconds<span class="o">)</span>
Cbc0035I Maximum depth 0, 0 variables fixed on reduced cost
Cuts at root node changed objective from <span class="nt">-550</span> to <span class="nt">-550</span>
Probing was tried 0 <span class="nb">times </span>and created 0 cuts of which 0 were active after adding rounds of cuts <span class="o">(</span>0.000 seconds<span class="o">)</span>
Gomory was tried 0 <span class="nb">times </span>and created 0 cuts of which 0 were active after adding rounds of cuts <span class="o">(</span>0.000 seconds<span class="o">)</span>
Knapsack was tried 0 <span class="nb">times </span>and created 0 cuts of which 0 were active after adding rounds of cuts <span class="o">(</span>0.000 seconds<span class="o">)</span>
Clique was tried 0 <span class="nb">times </span>and created 0 cuts of which 0 were active after adding rounds of cuts <span class="o">(</span>0.000 seconds<span class="o">)</span>
MixedIntegerRounding2 was tried 0 <span class="nb">times </span>and created 0 cuts of which 0 were active after adding rounds of 
cuts <span class="o">(</span>0.000 seconds<span class="o">)</span>
FlowCover was tried 0 <span class="nb">times </span>and created 0 cuts of which 0 were active after adding rounds of cuts <span class="o">(</span>0.000 
seconds<span class="o">)</span>
TwoMirCuts was tried 0 <span class="nb">times </span>and created 0 cuts of which 0 were active after adding rounds of cuts <span class="o">(</span>0.000 seconds<span class="o">)</span>
ZeroHalf was tried 0 <span class="nb">times </span>and created 0 cuts of which 0 were active after adding rounds of cuts <span class="o">(</span>0.000 seconds<span class="o">)</span>

Result - Optimal solution found

Objective value:                550.00000000
Enumerated nodes:               0
Total iterations:               0
Time <span class="o">(</span>CPU seconds<span class="o">)</span>:             0.00
Time <span class="o">(</span>Wallclock seconds<span class="o">)</span>:       0.00

Option <span class="k">for </span>printingOptions changed from normal to all
Total <span class="nb">time</span> <span class="o">(</span>CPU seconds<span class="o">)</span>:       0.01   <span class="o">(</span>Wallclock seconds<span class="o">)</span>:       0.01

Shan Status: Optimal
Optimal objective value 550.0
x_1 <span class="o">=</span> 30.0
x_2 <span class="o">=</span> 40.0
</code></pre></div></div> <h2 id="2-考虑收益衰减的生产问题miqp问题">2. 考虑收益衰减的生产问题（MIQP问题）</h2> <p>在示例1中的生产问题是一种基本的生产模型，在实际生产过程中，产品的利润有可能会随着产品的数量增加而逐渐降低，呈现收益衰减的现象。我们在示例1的基础上，不妨假设：</p> <ul> <li>产品\(a\)的生产成本为10元，销售价格为\(15-0.03{x_1}\)。</li> <li>产品\(b\)的生产成本为20元，销售价格为\(30-0.02{x_2}\)元。</li> </ul> <p>工厂生产能力和原材料与示例1相同，假设：</p> <ul> <li>每月生产能力为70单位。</li> <li>每月原材料限制为150单位，生产产品\(a\)消耗1单位原材料，生产产品\(b\)消耗3单位原材料。</li> </ul> <p>问题二： 如何决定每种产品数量，以实现最大化利润？</p> <ul> <li> <p>问题分析：</p> <p>从问题中，待优化的决策变量依然为产品\(a\)和产品\(b\)的数量，用\(x_1\)和\(x_2\)表示，其中\(x_1\)和\(x_2\)必须取整数值，但是收益模型变得更加复杂了。</p> <p>其中，我们的目标函数为：</p> \[\begin{array}{c} \max {(15-0.03x_1-10)x_1+(30-0.02x_2-20)x_2} \\ = \max {(-0.03{x_1}^{2}-0.02{x_2}^{2}+5x_1+10x_2)} \end{array}\] <p>约束不变，仍为：</p> \[\begin{array}{c} x_1+x_2 \le 70 \\ x_1+3x_2 \le 150 \\ x_1, x_2 \in Z^{+} \end{array}\] <p>我们可以看出优化的目标函数为二次形式，因此此任务可以被建模为一个MIQP问题，我们将其转换为矩阵的表示形式：</p> \[\begin{array}{c} \max {\mathbf{x} ^{T}\begin{bmatrix} -0.03 &amp; \\ &amp; -0.02 \end{bmatrix}\mathbf{x} + \begin{bmatrix} 5\\ 10 \end{bmatrix}^{T}\mathbf{x} } \\ s.t.\ \begin{bmatrix} 1 &amp; 1\\ 1 &amp; 3 \end{bmatrix}\mathbf{x} \le \begin{bmatrix} 70\\ 150 \end{bmatrix}, x_1, x_2 \in Z^{+} \end{array}\] </li> </ul> <h2 id="python求解代码基于scip-solvercvxpy">Python求解代码（基于SCIP solver+cvxpy）</h2> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">cvxpy</span> <span class="k">as</span> <span class="n">cp</span>
<span class="kn">import</span> <span class="n">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="k">def</span> <span class="nf">solver_main</span><span class="p">():</span>
    <span class="c1"># Coefficient setting
</span>    <span class="n">mat_Q</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">diag</span><span class="p">([</span><span class="o">-</span><span class="mf">0.03</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.02</span><span class="p">])</span>
    <span class="c1"># print('Q= ', mat_Q)
</span>    <span class="n">mat_c</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
    <span class="c1"># print('c= ', mat_c)
</span>    <span class="n">mat_A</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">ones</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
    <span class="n">mat_A</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">mat_b</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="nf">array</span><span class="p">([</span><span class="mi">70</span><span class="p">,</span> <span class="mi">150</span><span class="p">])</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="nc">Variable</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">integer</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="c1"># Optimization setting
</span>    <span class="n">objective</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="nc">Maximize</span><span class="p">(</span><span class="n">cp</span><span class="p">.</span><span class="nc">QuadForm</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mat_Q</span><span class="p">)</span> <span class="o">+</span> <span class="n">mat_c</span><span class="p">.</span><span class="n">T</span> <span class="o">@</span> <span class="n">x</span><span class="p">)</span>
    <span class="n">constraints</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">,</span> <span class="n">mat_A</span> <span class="o">@</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">mat_b</span><span class="p">]</span>
    <span class="n">prob</span> <span class="o">=</span> <span class="n">cp</span><span class="p">.</span><span class="nc">Problem</span><span class="p">(</span><span class="n">objective</span><span class="p">,</span> <span class="n">constraints</span><span class="p">)</span>
    <span class="n">prob</span><span class="p">.</span><span class="nf">solve</span><span class="p">()</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">The Optimal objective value: </span><span class="sh">'</span><span class="p">,</span> <span class="n">prob</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>   <span class="c1"># Optimal value
</span>    <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">[x_1, x_2]: </span><span class="sh">'</span> <span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">value</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">'</span><span class="s">__main__</span><span class="sh">'</span><span class="p">:</span>
    <span class="nf">solver_main</span><span class="p">()</span>
</code></pre></div></div> <p>运行脚本，你将看到优化后的结果为：</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The Optimal objective value:  491.0000000181662
<span class="o">[</span>x_1, x_2]:  <span class="o">[</span>30.00000001 40.        <span class="o">]</span>
</code></pre></div></div> <blockquote> <p>注意：复杂的MIP和MIQP问题在数学领域中是极难求解的，一般求解器求得的都是近似最优解（取决于求解器的求解方法），求解整数规划的求解器主要有：<strong>Gurobi</strong>，<strong>SCIP</strong>，<strong>CBC，OSQP</strong>等等。</p> </blockquote> <p>参考链接：</p> <p><a href="https://www.gurobi.com/resources/mixed-integer-programming-mip-a-primer-on-the-basics/">Gurobi base resource</a></p> <p><a href="https://www.cvxpy.org/examples/basic/quadratic_program.html">cvxpy tutorial</a></p> <p><a href="https://blog.csdn.net/weixin_44077955/article/details/126607480">混合整数规划（Mixed Integer Programming）</a></p> <p><a href="https://blog.csdn.net/weixin_46039719/article/details/121695205">整数规划（Python)</a></p> </div> </article> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js" integrity="sha256-QvgynZibb2U53SsVu98NggJXYqwRL7tg3FeyfXvPOUY=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/theme/dark-fresh-cut.js" integrity="sha256-sm6Ui9w41++ZCWmIWDLC18a6ki72FQpWDiYTDxEPXwU=" crossorigin="anonymous"></script> <script>let theme=determineComputedTheme();document.onreadystatechange=(()=>{"complete"===document.readyState&&document.querySelectorAll("pre>code.language-echarts").forEach(e=>{const t=e.textContent,a=e.parentElement;a.classList.add("unloaded");let n=document.createElement("div");if(n.classList.add("echarts"),a.after(n),"dark"===theme)var r=echarts.init(n,"dark-fresh-cut");else r=echarts.init(n);r.setOption(JSON.parse(t)),window.addEventListener("resize",function(){r.resize()})})});</script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let theme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===theme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-home",title:"Home",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-publication",title:"Publication",description:"publications by categories in reversed chronological order. generated by jekyll-scholar.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-blog",title:"Blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"post-\u6df7\u5408\u6574\u6570\u89c4\u5212\u4e0e\u6df7\u5408\u6574\u6570\u4e8c\u6b21\u89c4\u5212",title:"\u6df7\u5408\u6574\u6570\u89c4\u5212\u4e0e\u6df7\u5408\u6574\u6570\u4e8c\u6b21\u89c4\u5212",description:"MIP, MIQP\u4ecb\u7ecd\u548c\u5b9e\u4f8b\u5e94\u7528",section:"Posts",handler:()=>{window.location.href="/blog/2024/%E6%B7%B7%E5%90%88%E6%95%B4%E6%95%B0%E8%A7%84%E5%88%92%E4%B8%8E%E6%B7%B7%E5%90%88%E6%95%B4%E6%95%B0%E4%BA%8C%E6%AC%A1%E8%A7%84%E5%88%92/"}},{id:"post-\u4ee5slamer\u89d2\u5ea6\u770b\u5f85gn\u548clm\u7b97\u6cd5",title:"\u4ee5SLAMer\u89d2\u5ea6\u770b\u5f85GN\u548cLM\u7b97\u6cd5",description:"\u7528\u767d\u8bdd\u4ecb\u7ecdGN\u548cLM\u7b97\u6cd5",section:"Posts",handler:()=>{window.location.href="/blog/2024/%E4%BB%A5SLAMer%E8%A7%92%E5%BA%A6%E7%9C%8B%E5%BE%85GN%E5%92%8CLM%E7%AE%97%E6%B3%95/"}},{id:"news-mip-amp-miqp-blog-released",title:"\ud83d\udcdc\ud83d\udcdc MIP & MIQP Blog Released!",description:"",section:"News"},{id:"news-one-cooperated-paper-is-accepted-by-ieee-t-iv",title:"\ud83c\udf89\ud83c\udf89 One cooperated paper is accepted by IEEE T-IV!",description:"",section:"News"},{id:"news-busts-in-silhouette-busts-in-silhouette-attending-icra-2024-attendance-in-japan-yokohama",title:'<img class="emoji" title=":busts_in_silhouette:" alt=":busts_in_silhouette:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f465.png" height="20" width="20"><img class="emoji" title=":busts_in_silhouette:" alt=":busts_in_silhouette:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f465.png" height="20" width="20"> Attending ICRA 2024 attendance in Japan Yokohama.',description:"",section:"News"},{id:"news-hap-paper-is-accepted-by-icra-2024",title:"\ud83c\udf89\ud83c\udf89 HAP paper is accepted by ICRA 2024!",description:"",section:"News"},{id:"news-the-first-time-to-establish-this-page",title:"\ud83c\udf89\ud83c\udf89 The first time to establish this page.",description:"",section:"News"},{id:"projects-project-1",title:"project 1",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/1_project/"}},{id:"projects-project-2",title:"project 2",description:"a project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/2_project/"}},{id:"projects-project-3-with-very-long-name",title:"project 3 with very long name",description:"a project that redirects to another website",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"projects-project-4",title:"project 4",description:"another without an image",section:"Projects",handler:()=>{window.location.href="/projects/4_project/"}},{id:"projects-project-5",title:"project 5",description:"a project with a background image",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-project-6",title:"project 6",description:"a project with no image",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%73%64%77%79%63@%6D%61%69%6C.%73%64%75.%65%64%75.%63%6E","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=Us-5jAQAAAAJ","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/sdwyc","_blank")}},{id:"socials-youtube",title:"YouTube",section:"Socials",handler:()=>{window.open("https://youtube.com/@yinchuanwang3591","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>