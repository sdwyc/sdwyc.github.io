---
layout: post
title: ä»¥SLAMerè§’åº¦çœ‹å¾…GNå’ŒLMç®—æ³•
date: 2024-06-20 16:03:00
description: ç”¨ç™½è¯ä»‹ç»GNå’ŒLMç®—æ³•
tags: SLAM, Point-Registration
categories: math
chart:
  echarts: true
---

# å¼•è¨€
SLAMä½œä¸ºæœºå™¨äººå’Œè‡ªåŠ¨é©¾é©¶é¢†åŸŸçš„æ ¸å¿ƒé—®é¢˜ä¹‹ä¸€ï¼Œå…¶ç›®æ ‡æ˜¯åœ¨æœªçŸ¥ç¯å¢ƒä¸­å®ç°åŒæ—¶çš„å®šä½å’Œåœ°å›¾æ„å»ºã€‚å…¶ä¸­åœ¨æ±‚è§£å¤šè§‚æµ‹çº¦æŸä¸‹çš„ä½å§¿ä¼°è®¡é—®é¢˜æ—¶ï¼ŒGNå’ŒLMç®—æ³•åœ¨æ±‚è§£éçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜æ–¹é¢æ‰®æ¼”äº†é‡è¦çš„è§’è‰²ã€‚ä¸ºå˜›å‘¢ï¼Ÿå› ä¸ºè¿™ä¿©æ€æƒ³éå¸¸ç®€å•å®ç”¨ã€‚åšä¸»ä¸ªäººè®¤ä¸ºï¼Œè¿™ä¸¤ç§æ–¹æ³•çš„ä¸€ä¸ªå…±åŒçš„ä¼˜ç‚¹æ˜¯å¿«ï¼Œç®€å•ï¼Œå‡†ç¡®åº¦å¯ä»¥æ¥å—ã€‚æ¥ä¸‹æ¥ï¼Œä»ä¸€ä¸ªSLAMerçš„è§’åº¦çœ‹å¾…GNå’ŒLMç®—æ³•ã€‚**æ³¨æ„**ï¼Œæœ¬ç¯‡ä¸æ¶‰åŠä»£ç ç¼–ç¨‹å’Œå¤æ‚çš„ç†è®ºè¯´æ˜ï¼Œä»…æœ‰å…¬å¼æ¨å¯¼ï¼Œæ—¨åœ¨ç”¨ç™½è¯æ¥è®¨è®ºGNå’ŒLMç®—æ³•ã€‚å¦‚æœ‰é€»è¾‘ä¸Šçš„ä¸ä¸¥è°¨ï¼Œæ¬¢è¿å„ä½æ‰¹è¯„æŒ‡è¯ã€‚

---

# 1. ä¸€ä¸ªéçº¿æ€§ä¼˜åŒ–é—®é¢˜çš„å»ºæ¨¡

ä¸€ä¸ªSLAMé—®é¢˜é€šå¸¸å¯ä»¥è¢«æè¿°ä¸ºä¸€ä¸ªæœ€å¤§åéªŒæ¦‚ç‡é—®é¢˜ï¼Œä¹Ÿå«MAPï¼ˆMaximum ï¼‰é—®é¢˜ï¼Œ å³æˆ‘ä»¬æƒ³æ ¹æ®å†å²æ—¶åˆ»**å·²è§‚æµ‹åˆ°çš„æ•°æ®$$z$$å’ŒçŠ¶æ€$$x$$ï¼Œä»¥åŠæ§åˆ¶é‡$$u$$**ï¼Œå¾—åˆ°æœ€æœ‰å¯èƒ½çš„ä¸‹ä¸€æ—¶åˆ»çš„çŠ¶æ€$$x_{t+1}$$ï¼ˆå› ä¸ºSLAMçš„æ ¸å¿ƒæœ¬è´¨æ˜¯Localizationå˜›ï¼‰ï¼Œç”¨å…¬å¼æ¥æè¿°å°±æ˜¯

$$
x_{t+1} = \underset{x}{argmax} P(x_{t+1}|z_{0:t}, x_{0:t},u_{0:t}) 
$$

è¿™å…¶å®æ˜¯ä¸€ä¸ªå¾ˆæŠ½è±¡çš„æè¿°å…¬å¼ï¼Œå› ä¸ºæˆ‘ä»¬èƒ½é€šè¿‡å…¬å¼çœ‹åˆ°SLAMé—®é¢˜çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯æˆ‘ä»¬æ— æ³•æ‰¾åˆ°ä¸€ä¸ªå…·ä½“çš„ä»£å…¥æ–¹æ³•å’Œæ±‚è§£æ–¹æ³•ã€‚å¹¶ä¸”ï¼Œæ±‚è§£MAPé—®é¢˜æœ¬èº«æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„é—®é¢˜ï¼Œæ±‚è§£æ–¹æ³•ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ ç²’å­æ»¤æ³¢ï¼Œå¡å°”æ›¼æ»¤æ³¢ç­‰ç­‰ã€‚è€Œæœ¬ç« æ‰€è¯´çš„éçº¿æ€§ä¼˜åŒ–ï¼Œä¹Ÿæ˜¯æ±‚è§£MAPé—®é¢˜çš„ä¸€ä¸ªæœ‰æ•ˆçš„é€”å¾„ã€‚

æˆ‘ä»¬ä»¥ä¸€ä¸ªçº¯æ¿€å…‰SLAMä¸ºä¾‹ï¼Œæ¿€å…‰é›·è¾¾å¸¦æ¥çš„æ˜¯ä¸€ç³»åˆ—çš„ç‚¹äº‘ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ**æ¯ä¸€ä¸ªç‚¹**éƒ½çœ‹ä½œæ˜¯ä¸€æ¬¡å¯¹ç¯å¢ƒçš„è§‚æµ‹ï¼Œå¯¹ä¸€ä¸ªSLAMï¼ˆæˆ–è€…æ˜¯Localizationï¼‰é—®é¢˜ï¼Œæœ€é‡è¦çš„æ˜¯è¦**æ¨ç®—å‡ºé›·è¾¾çš„å½“å‰ä½ç½®$$\mathbf{x}^{L}_{t}$$**ï¼Œè€Œä¸”æˆ‘ä»¬è¿˜çŸ¥é“åœ¨ä¸€ä¸ª**3ç»´ç©ºé—´ä¸‹çš„åˆšæ€§å˜æ¢$$\mathbf{T}$$å¯ä»¥ç”¨æ—‹è½¬çŸ©é˜µ$$\mathbf{R}$$å’Œå¹³ç§»å‘é‡$$\mathbf{t}$$æ¥è¡¨ç¤ºï¼Œ**é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†é›·è¾¾çš„å½“å‰ä½ç½®è¡¨ç¤ºä¸º

$$
\mathbf{x}^{L}_{t} = \prod_{i=0}^{t-1} \mathbf{\bigtriangleup T}_{i} \cdot \mathbf{x}^{L}_{0}
$$

ç”¨å¤§ç™½è¯è®²ï¼Œé›·è¾¾å½“å‰çš„ä½ç½®ç›¸å½“äºå¯¹é›·è¾¾åˆå§‹ä½ç½®$$\mathbf{x}^{L}_{0}$$é€æ­¥è¿›è¡Œå˜æ¢$$\mathbf{\bigtriangleup T}_{i}$$å³å¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„é—®é¢˜å°±è½¬æ¢ä¸ºå¦‚ä½•æ±‚å–$$\mathbf{\bigtriangleup T}_{i}$$ã€‚

ç°åœ¨æˆ‘ä»¬å‡è®¾ï¼Œç»è¿‡ä¸€ä¸ªåˆšæ€§å˜æ¢$\mathbf{T}$çš„å‰åä¸¤å¸§é›·è¾¾ç‚¹äº‘åˆ†åˆ«ä¸º$$P_{A}=\{ p^{A}_{i} \}$$å’Œ$$\mathcal{P}_{B}=\{ \mathbf{p}_{j} \}$$ï¼Œå¹¶æˆ‘ä»¬åœ¨ä¸è€ƒè™‘å™ªå£°å’Œå¼‚å¸¸ç‚¹ï¼ˆoutlierï¼‰çš„å‰æä¸‹ï¼Œè¿™ä¸¤å¨ç‚¹äº‘ç†åº”æ»¡è¶³

$$
\begin{matrix} \mathcal{P}_{B}= \mathbf{T}\mathcal{P}_{A}  \\\\ \sum ||\mathbf{p}^{B}_{j} - \mathbf{T} \mathbf{p}^{A}_{i}||_{2} = 0\end{matrix}
$$

è¿™ä¸¤ä¸ªå¼å­æ„æ€å°±æ˜¯ï¼Œå˜æ¢å‰çš„é›·è¾¾å¸§å†ç»ä¸€æ¬¡åˆšæ€§å˜æ¢$$\mathbf{T}$$åï¼Œåº”è¯¥ä¸å˜æ¢åçš„ç‚¹äº‘å®Œå…¨é‡åˆï¼ˆåœ¨ç‚¹çš„å¯¹åº”å…³ç³»å·²çŸ¥çš„æƒ…å†µä¸‹ï¼‰ã€‚Butï¼è¿™åªæ˜¯ä¸€ä¸ªéå¸¸ç†æƒ³çš„æƒ…å†µï¼Œç°å®æƒ…å¢ƒä¸‹ï¼Œæ˜¯ä¸å¯ä»¥å¿½ç•¥å™ªå£°å’Œå¼‚å¸¸ç‚¹çš„ï¼

OKï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å°†è¿™äº›å› ç´ è€ƒè™‘è¿›å»ã€‚å‡è®¾æˆ‘ä»¬ç»™æ¯ä¸ªç‚¹åŠ ä¸€ä¸ªé«˜æ–¯ç™½å™ªå£°ï¼Œå³$$\mathbf{p}_{i}\sim N(\mathbf{p}_{i}, \mathbf{\Sigma}_{i})$$ï¼Œ è¿™é‡Œç”±äºä¸€ä¸ªç‚¹å¯åšæ˜¯ä¸€ä¸ª3ç»´å‘é‡ï¼Œå› æ­¤æ¯ä¸ªç‚¹æœä»ä¸€ä¸ªå¤šç»´é«˜æ–¯åˆ†å¸ƒã€‚ä¹Ÿå°±æ˜¯æ¯ä¸ªç‚¹çš„ä½ç½®åˆ†å¸ƒæƒ…å†µæ˜¯æ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚ç‡çš„ï¼Œæˆ‘ä»¬çŸ¥é“é«˜æ–¯åˆ†å¸ƒæœ‰ä¸ªä¼˜é›…çš„æ€§è´¨ï¼Œ**å¤šä¸ªç‹¬ç«‹çš„é«˜æ–¯åˆ†å¸ƒçš„çº¿æ€§ç»„åˆä¾æ—§æ˜¯é«˜æ–¯åˆ†å¸ƒ**ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ¨å‡º

$$
(\mathbf{p}^{B}_{j} - \mathbf{T} \mathbf{p}^{A}_{i}) \sim N(\mathbf{d}_{ij}, \mathbf{\Sigma}_{j} + \mathbf{T}^{T} \mathbf{\Sigma}_{i} \mathbf{T})
$$

å“ï¼ï¼Ÿè¿™ä¸ªå¥½ï¼Œè¿™ä¸ªå…¬å¼çœ‹èµ·æ¥å¾ˆä¼˜é›…ï¼Œè¿™æ—¶æˆ‘ä»¬å°±åœ¨æƒ³ï¼Œå¦‚æœæ¯ä¸ªç‚¹ä¹‹é—´éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œè¿™ä¸ª$$**\mathbf{T}$$åªè¦èƒ½è®©æ¯ä¸ªç‚¹å¯¹çš„å·®å€¼$$\mathbf{d}_{ij}$$ä¸º0çš„è”åˆæ¦‚ç‡æœ€å¤§**ä¸å°±å®Œäº†ä¹ˆï¼ï¼å†è¥¿ï¼Œé‚£ä¹ˆè¯´åšå°±åšï¼Œæˆ‘ä»¬å¾—åˆ°ä¸‹é¢è¿™ä¸ªå¼å­

$$
\begin{align} \mathbf{T} & = 
 \underset{\mathbf{T} }{argmax} \prod  P(\mathbf{p}^{B}_{j} - \mathbf{T} \mathbf{p}^{A}_{i})\\
& \overset{log}{=} \underset{\mathbf{T} }{argmin} \sum \mathbf{d}_{ij}^{T}(\mathbf{\Sigma}_{j} + \mathbf{T}^{T} \mathbf{\Sigma}_{i} \mathbf{T})^{-1} \mathbf{d}_{ij}\\
& = {\color{Red} \underset{\mathbf{T} }{argmin} \sum \mathbf{d}_{ij}^{T}(\mathbf{\Sigma}_{ij})^{-1} \mathbf{d}_{ij}} 
\end{align}
$$

è§£é‡Šä¸€ä¸‹ï¼Œå…¬å¼ï¼ˆ1ï¼‰è¡¨ç¤ºçš„æ˜¯è”åˆæ¦‚ç‡æœ€å¤§åŒ–ï¼Œä½†æ˜¯æ±‚ç§¯æ“ä½œä¸å¥½ç®—ï¼Œå†µä¸”é«˜æ–¯åˆ†å¸ƒé‡Œå«æœ‰æŒ‡æ•°$$exp(\cdot)$$ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä¸¤è¾¹å–å¯¹æ•°æ“ä½œæ¥å»æ‰æŒ‡æ•°å’Œå¸¸æ•°é¡¹ï¼ŒåŒ–ç§¯ä¸ºå’Œã€‚**æœ€ç»ˆåŒ–ç®€å‡ºæ¥çš„å…¬å¼ï¼ˆ3ï¼‰æ­£å¼æè¿°äº†ä¸€ä¸ªéçº¿æ€§æœ€å°äºŒä¹˜é—®é¢˜ï¼Œä¹Ÿæ˜¯ICPé…å‡†é—®é¢˜çš„æ ¸å¿ƒå…¬å¼**ã€‚

ç°åœ¨æˆ‘ä»¬æ¢ä¸€ä¸ªæ€è·¯æ¥ç†è§£ä¸Šé¢å…¬å¼ï¼ˆ3ï¼‰å¹¶ä¸”å°†é‡Œé¢çš„ç¬¦å·è½¬æ¢æˆä¸€ä¸ªæ˜“äºç†è§£çš„å½¢å¼ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œæœ€å°äºŒä¹˜é—®é¢˜çš„æœ¬è´¨æ€æƒ³æ˜¯ï¼š**è®©çœŸå®å€¼ä¸ç†è®ºå€¼çš„å·®è·ä¹‹å’Œï¼ˆå³æ®‹å·®ï¼‰æœ€å°**ã€‚ä»è¿™ä¸ªæ€è·¯å‡ºå‘ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œå…¬å¼ï¼ˆ3ï¼‰ä¸­çš„$$\mathbf{d}_{ij}^{T}\mathbf{d}_{ij}$$å…¶å®å°±æ˜¯æœ€å°äºŒä¹˜ä¸­çš„**æ®‹å·®é¡¹**ï¼Œè€Œ$$(\mathbf{\Sigma}_{ij})^{-1}$$åªä¸è¿‡æ˜¯ç»™æ¯ä¸€ä¸ªæ®‹å·®é¡¹æˆäº†ä¸€ä¸ªæƒé‡ç³»æ•°ï¼Œå› æ­¤åšä¸»ä¹ æƒ¯æŠŠ$$(\mathbf{\Sigma}_{ij})^{-1}$$ç§°ä¸º**æƒé‡çŸ©é˜µ**ï¼ˆå½“ç„¶è¿™ä¸ªçŸ©é˜µçš„åå·å¾ˆå¤šï¼Œæ¯”å¦‚è¯´ä¿¡æ¯çŸ©é˜µï¼Œé©¬æ°è·ç¦»â€¦ï¼‰ã€‚è¿™ä¸ªå¦‚æœç‚¹å¯¹çš„åæ–¹å·®è¶Šå°ï¼Œä»£è¡¨å¯¹ä½ç½®çš„ä¿¡ä»»ç¨‹åº¦ï¼Œå°±è¶Šé«˜ï¼Œè‡ªç„¶æƒé‡å°±è¶Šå¤§ã€‚OKï¼Œè¿™æ ·ä¸€ä¸ªé’ˆå¯¹éçº¿æ€§ä¼˜åŒ–çš„æœ€å°äºŒä¹˜é—®é¢˜å°±æè¿°å®Œäº†ï¼ ä¸‹é¢å‘¢ï¼Œä¸ºäº†ä¾¿äºç†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯**ç”¨$$\mathbf{e}_{ij}$$è¡¨ç¤ºæ®‹å·®ï¼Œç”¨$$\mathbf{\Omega}_{ij}$$è¡¨ç¤ºæƒé‡çŸ©é˜µï¼ˆä¿¡æ¯çŸ©é˜µï¼‰**ï¼Œå³

$$
\mathbf{T} = \underset{\mathbf{T} }{argmin} \sum \mathbf{e}_{ij}^{T}\mathbf{\Omega }_{ij} \mathbf{e}_{ij} \quad\ \  \ (LSQ)
$$

# 2. é«˜æ–¯ç‰›é¡¿ä¼˜åŒ–ç®—æ³•ï¼ˆGauss-Newtonï¼‰

æˆ‘ä»¬ç°åœ¨æœ‰è¦è§£å†³çš„ç›®æ ‡ä¼˜åŒ–é—®é¢˜ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•æ±‚è§£å‘¢ï¼Œæ¢¯åº¦ä¸‹é™æ³•æ•™ä¼šäº†æˆ‘ä»¬é€šè¿‡è¿­ä»£æ±‚è§£æœ€å°å€¼æ—¶ï¼Œè¦å¾€æ¢¯åº¦ï¼ˆå¯¼æ•°ï¼‰ä¸‹é™æœ€å¤§çš„æ–¹å‘èµ°ï¼Œä½†æ˜¯å¦‚ä½•æ±‚æ¢¯åº¦å‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™é«˜æ–¯ç‰›é¡¿æ³•å¯¹æ­¤æœ‰äº†æ–°çš„æ–¹æ¡ˆã€‚

è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬å¼€å§‹è¿›å…¥æ­£é¢˜ï¼ˆåŸè°…åšä¸»åºŸè¯è¿‡å¤šï¼‰ï¼Œç¬¬1ç« ä¸­æ¯ä¸€ä¸ªæ®‹å·®é¡¹å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå…³äº$$\mathbf{p}^{A}$$çš„å‡½æ•°ï¼ˆå› ä¸ºæˆ‘ä»¬æ˜¯æƒ³è®©é€šè¿‡è°ƒæ•´$$\mathbf{P}_{A}$$æ¥å¯¹é½$$\mathbf{P}_{B}$$ï¼‰ï¼Œä»¥ä¸‹ç®€ç§°$$\mathbf{e}(\mathbf{p})$$ã€‚ç°åœ¨æˆ‘ä»¬å¯¹$$\mathbf{e}(\mathbf{p})$$åœ¨$$\mathbf{p}$$é™„è¿‘è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€ã€‚

$$
\mathbf{e}(\mathbf{p}+\Delta\mathbf{p}) = \mathbf{e}(\mathbf{p}) + \mathbf{J} (\mathbf{p})\Delta\mathbf{p} \quad \ \ \ \ (Taylor)
$$

è¿™é‡Œçš„$$\mathbf{J} (\mathbf{p})=\frac{d \mathbf{e} (\mathbf{p} )}{d\mathbf{p} }$$ ï¼Œä¹Ÿå°±æ˜¯æ±Ÿæ¹–ä¸Šä»¤äººé—»é£ä¸§èƒ†çš„é›…å¯æ¯”çŸ©é˜µï¼ˆJacobian Matrixï¼‰ï¼Œä¸ºå•¥é—»é£ä¸§èƒ†ï¼Ÿä¸”çœ‹åç»­æ¨å¯¼ï¼Œç°åœ¨æˆ‘ä»¬åªéœ€è¦å‡è®¾å·²çŸ¥$$\mathbf{J} (\mathbf{p})$$å°±å¥½å•¦ã€‚

> ##### è¿™é‡Œéœ€è¦è¯´æ˜ä¸¤ç‚¹ï¼š
>1. æ³°å‹’çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Œåœ¨G-Nä¼˜åŒ–ä¸­ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯ç›´æ¥æ±‚ä¸¤å¨ç‚¹äº‘ä¹‹é—´çš„å˜æ¢$$\mathbf{T}$$ï¼Œè€Œæ˜¯é€šè¿‡è¿­ä»£æ±‚è§£ï¼Œæ¯æ¬¡è¿­ä»£ä¼šå¯»æ‰¾ä¸€ä¸ªçš„å¢é‡$$\Delta\mathbf{T}$$ï¼Œä½¿å¾—$$\sum \mathbf{e}_{k}^{T}(\Delta\mathbf{T}\mathbf{p}_{k})\mathbf{\Omega }_{k} \mathbf{e}_{k}(\Delta\mathbf{T}\mathbf{p}_{k})$$å°½å¯èƒ½çš„å°
>2. ç¬¦å·çš„è¯´æ˜ï¼Œæœ‰äººå°±è¦æ€¼æˆ‘äº†ï¼Œæ€ä¹ˆè¿˜ä¸€ä¼šç”¨$$\Delta\mathbf{T}\mathbf{p}$$ï¼Œä¸€ä¼šç”¨$$\mathbf{p}+\Delta\mathbf{p}$$ã€‚å…¶å®è¿™é‡Œä¸¤ä¸ªè¡¨ç¤ºæ–¹æ³•æ˜¯åŒä¸€ä¸ªæ„æ€ï¼Œéƒ½è¡¨ç¤ºä¸ºå¯¹ä¸€ä¸ªç‚¹åšä¸€æ¬¡åˆšæ€§å˜æ¢ï¼Œåªä¸è¿‡åœ¨æ¨å¯¼æ•°å­¦å…¬å¼æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½æ›´ä¹ æƒ¯ä½¿ç”¨æ±‚å’Œè€Œå·²ã€‚
{: .block-tip }

è¿™é‡Œæˆ‘ä»¬æ—¨åœ¨æ±‚è§£æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­çš„æœ€ä¼˜$$\Delta \mathbf{p}$$å³å¯ï¼Œ æˆ‘ä»¬å°†ä¸Šé¢æ³°å‹’å±•å¼€å¼å­ä»£å…¥åˆ°å…¬å¼ï¼ˆLSQï¼‰ä¸­ï¼Œå¹¶è¿›è¡Œæ¨å¯¼

$$
\begin{align}
\bigtriangleup \mathbf{p} & = \underset{\mathbf{\bigtriangleup p} }{argmin} \sum \mathbf{e}_{k}^{T}(\mathbf{p} +\mathbf{\bigtriangleup p} )\mathbf{\Omega }_{k} \mathbf{e}_{k}(\mathbf{p} +\mathbf{\bigtriangleup p}) \\
& = \underset{\mathbf{\bigtriangleup p} }{argmin} \sum [\mathbf{e}_{k}(\mathbf{p}) + \mathbf{J}_{k} (\mathbf{p})\Delta\mathbf{p}]^{T} \mathbf{\Omega }_{k} [\mathbf{e}_{k}(\mathbf{p}) + \mathbf{J}_{k} (\mathbf{p})\Delta\mathbf{p}] \\
& = \underset{\mathbf{\bigtriangleup p} }{argmin} \sum (\mathbf{e}_{k}^{T}\Omega_{k}\mathbf{e}_{k} +\mathbf{e}_{k}^{T}\Omega_{k}\mathbf{J}_{k}\mathbf{\bigtriangleup p} + \mathbf{\bigtriangleup p}^{T}\mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k}+\mathbf{\bigtriangleup p}^{T}\mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k}\mathbf{\bigtriangleup p}) \\
& = \underset{\mathbf{\bigtriangleup p} }{argmin} \sum (\underbrace{\mathbf{e}_{k}^{T}\Omega_{k}\mathbf{e}_{k}}_{å¸¸æ•°é¡¹} +2\cdot \mathbf{\bigtriangleup p}^{T}\mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k}+\mathbf{\bigtriangleup p}^{T}\mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k}\mathbf{\bigtriangleup p}) \\
& = \underset{\mathbf{\bigtriangleup p} }{argmin} \sum (2\cdot \mathbf{\bigtriangleup p}^{T}\mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k}+\mathbf{\bigtriangleup p}^{T}\mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k}\mathbf{\bigtriangleup p}) \\
& = \underset{\mathbf{\bigtriangleup p} }{argmin} [2 \mathbf{\bigtriangleup p}^{T}\cdot \sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k}+\mathbf{\bigtriangleup p}^{T}\cdot  \sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k} \cdot \mathbf{\bigtriangleup p})] \\
\end{align}
$$

å…¶ä¸­ï¼Œåšä¸»ä¸ºäº†ç®€åŒ–è¡¨ç¤ºï¼Œå°†$$\mathbf{e}_{k}(\mathbf{p})$$ç®€åŒ–ä¸º$$\mathbf{e}_{k}$$ï¼Œå¾—åˆ°çš„å…¬å¼ï¼ˆ9ï¼‰éå¸¸é‡è¦ï¼Œå®ƒè¡¨æ˜ï¼Œè¯¥ç›®æ ‡ä¼˜åŒ–é—®é¢˜æ˜¯ä¸€ä¸ªå…³äº$\Delta\mathbf{p}$çš„äºŒæ¬¡å‹é—®é¢˜ï¼è¿™ä¸ªå‘ç°å¾ˆé‡è¦ï¼Œå†³å®šäº†ä¼˜åŒ–æ±‚è§£çš„ç¨³å®šæ€§ã€‚

æ¥ä¸‹æ¥ï¼Œè¿™é‡Œæˆ‘ä»¬è®¡ç®—å…¬å¼ï¼ˆ9ï¼‰ä¸­çš„ç›®æ ‡å‡½æ•°å…³äº$$\Delta \mathbf{p}$$çš„å¯¼æ•°ï¼Œå¯ä»¥å¾—åˆ°

$$
\begin{matrix}& [2 \mathbf{\bigtriangleup p}^{T}\cdot \sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k}+\mathbf{\bigtriangleup p}^{T}\cdot  \sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k} \cdot \mathbf{\bigtriangleup p})]^{\prime } \\ \\ & = 2\sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k} +2\sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k} \cdot \mathbf{\bigtriangleup p}\end{matrix}
$$

ä»¤å…¶å¯¼æ•°$$2\sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k} +2\sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k} \cdot \mathbf{\bigtriangleup p} = 0$$ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°

$$
2\sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k} \cdot \mathbf{\bigtriangleup p} + 2\sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k} = 0
$$

å¯èƒ½ä½ è¿˜è§‰å¾—ä¸å¤Ÿé¢ç†Ÿï¼Œæˆ‘ä»¬æ‰¾ä¸ªç¬¦å·ä»£æ›¿ä¸€ä¸‹ï¼š

$$
\begin{matrix} & \mathbf{H}\mathbf{\bigtriangleup p}-\mathbf{g} = \mathbf{0} \quad ï¼ˆGNä¸­çš„å¢é‡æ–¹ç¨‹ï¼‰ \\ where,\\ & \mathbf{H} = \sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k},\\\\ & \mathbf{g} = -\sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{e}_{k}\end{matrix}
$$

è¿™æ ·å°±ç†Ÿæ‚‰å¤šäº†ï¼Œè¿™ä¸å°±æ˜¯åœ¨çº¿æ€§ä»£æ•°è¯¾ä¸Šå­¦çš„çº¿æ€§æ–¹ç¨‹æ±‚è§£é—®é¢˜ä¹ˆã€‚æ²¡é”™æ˜¯çš„ï¼Œæˆ‘ä»¬é€šè¿‡åŒ–ç®€æœ€ç»ˆå°†ä¼˜åŒ–é—®é¢˜è½¬åŒ–ä¸ºä¸€ä¸ªæ±‚è§£çº¿æ€§æ–¹ç¨‹çš„é—®é¢˜ï¼Œæ€ä¹ˆæ±‚è§£ï¼Œè¿™ä¸ªå°±ä¸ç”¨å¤šè¯´äº†ã€‚è¿™é‡Œçš„$$\mathbf{H}$$ï¼Œé€šå¸¸è¢«ç§°ä¸ºæµ·æ£®çŸ©é˜µï¼ˆHessian Matrixï¼‰ï¼Œè€Œä¸”æµ·æ£®çŸ©é˜µ$$\mathbf{H}$$è¦æ±‚å¿…é¡»æ˜¯æ­£å®šçŸ©é˜µï¼Œä¸Šè¿°çš„åŒ–ç®€æ‰æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä¸ºå•¥å˜ï¼Ÿæˆ‘ä»¬èƒ½å¤Ÿçœ‹åˆ°è¿™ä¸ªçº¿æ€§æ–¹ç¨‹çš„å¯¼æ•°å°±æ˜¯$$\mathbf{H}$$ï¼ˆç›®æ ‡å‡½æ•°çš„äºŒé˜¶å¯¼æ•°ï¼‰ï¼Œæˆ‘ä»¬çŸ¥é“åªæœ‰å½“ä¸€é˜¶å¯¼æ•°ä¸º0ï¼ŒäºŒé˜¶å¯¼æ•°ï¼0æ—¶ï¼ˆ$$\mathbf{H}$$ä¸ºæ­£å®šçŸ©é˜µï¼‰ï¼Œæˆ‘ä»¬æ±‚å‡ºæ¥çš„æ‰æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„æœ€å°å€¼ç‚¹ã€‚å½“ç„¶è¿™åªæ˜¯ä¸€æ¬¡è¿­ä»£æ‰€æ±‚è§£çš„å˜æ¢$$\Delta \mathbf{T}$$ï¼Œå¤šæ¬¡è¿­ä»£æ”¶æ•›åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°å®Œæ•´çš„åˆšæ€§å˜æ¢$$\mathbf{T} = \prod \Delta \mathbf{T}$$ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œç»™è¯»è€…æœ‹å‹ä»¬æ‰¾äº†ï¼ˆå®åˆ™ç½‘ä¸Šæ‰’ ğŸ˜ï¼‰ä¸€ä¸ªç®€å•çš„ç®—æ³•æµç¨‹ï¼š

<div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        {% include figure.liquid loading="eager" path="assets/img/post_img/ä»¥SLAMerè§’åº¦çœ‹å¾…GNå’ŒLMç®—æ³•/GN.png" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    GNç®—æ³•çš„åŸºæœ¬æµç¨‹
</div>

# 3. åˆ—æ–‡ä¼¯æ ¼-é©¬å¤¸å°”ç‰¹ä¼˜åŒ–ç®—æ³•ï¼ˆLevenberg-Marquadtï¼ŒLMï¼‰

æˆ‘ä»¬åœ¨ç¬¬2ç« é€æ­¥æ¨å¯¼äº†GNç®—æ³•ï¼Œå¹¶ä¸”æˆ‘ä»¬å¾—åˆ°äº†**å…¶ç²¾é«“**ï¼š

1. ä¼˜åŒ–é—®é¢˜çš„æ±‚è§£â€”â€”>çº¿æ€§æ–¹ç¨‹ç»„çš„æ±‚è§£é—®é¢˜
2. æµ·æ£®çŸ©é˜µçš„è¿‘ä¼¼ï¼š$$\mathbf{H} = \sum \mathbf{J}_{k}^{T}\Omega_{k}\mathbf{J}_{k}$$ï¼Œå³äºŒé˜¶å¯¼æ•°å¯ä»¥ç”¨ä¸€é˜¶å¯¼æ•°è¿‘ä¼¼

    ä¸éš¾çœ‹å‡ºï¼Œ GNç®—æ³•é€šè¿‡åœ¨$$\mathbf{p}$$é™„è¿‘è¿›è¡Œä¸€é˜¶æ³°å‹’å±•å¼€æ¥ç®€åŒ–è®¡ç®—ï¼Œä½†è¿™æœ‰ä¸ªå‰æï¼Œé‚£å°±æ˜¯$$\Delta \mathbf{p}$$ä¸èƒ½å¤ªå¤§ï¼Œå¦åˆ™è¿‘ä¼¼æ•ˆæœå¾ˆå·®ï¼ˆå› ä¸º$$\mathbf{H}$$ä¸ä¸€å®šæ€»æ˜¯æ­£å®šçš„ï¼Œæœ‰å¯èƒ½æ˜¯åŠæ­£å®šçš„ï¼‰ã€‚ç”¨æ•°å­¦çš„è¯­è¨€æ¥è¯´ï¼Œ$$\Delta \mathbf{p}$$æ˜¯æœ‰ä¸€ä¸ªç½®ä¿¡åŒºé—´çš„ï¼Œåªæœ‰åœ¨è¿™ä¸ªåŒºé—´é‡Œé¢ï¼Œæˆ‘ä»¬æ‰èƒ½ä¿¡ä»»å®ƒã€‚è¿™å°±ç»™æ±‚è§£çº¿æ€§æ–¹ç¨‹å¸¦æ¥äº†å¾ˆå¤§çš„å›°æ‰°ï¼Œæœ¬æ¥æƒ³ç€è¿™ä¸ªå˜æ¢æ­¥é•¿ç®€å•æ˜“æ±‚ï¼Œä½†æ²¡æƒ³åˆ°è¿™ä¸ªæ­¥é•¿é•¿åº¦ä¸å¥½æŠŠæ¡ï¼Œæ­¥é•¿å¤ªçŸ­åˆ™è€å¤ªå¤ªè£¹è„šï¼Œæ­¥é•¿å¤ªé•¿åˆ™å°é¹¿ä¹±æ’ã€‚

    äºæ˜¯äººä»¬å¯¹GNç®—æ³•ä½œäº†è¿›ä¸€æ­¥ä¿®æ­£ã€‚æ‰€ç”¨çš„æŠ€å·§æ˜¯æŠŠä¸€ä¸ªç»å¯¹æ­£å®šå¯¹è§’çŸ©é˜µåŠ åˆ°$$\mathbf{H}$$ä¸Šå» ï¼Œæ”¹å˜åŸçŸ©é˜µçš„ç‰¹å¾å€¼ç»“æ„ ï¼Œä½¿å…¶å˜æˆè¾ƒå¥½çš„å¯¹ç§°æ­£å®šçŸ©é˜µã€‚å› æ­¤LMä¸­çš„å¢é‡æ–¹ç¨‹ä¸ºï¼š

$$
(\mathbf{H} +\lambda \mathbf{I} )\Delta p = \mathbf{g}   \quad ï¼ˆLMä¸­çš„å¢é‡æ–¹ç¨‹ï¼‰
$$

å…¶ä¸­ï¼Œ$$\lambda$$æ˜¯ä¸€ä¸ªæ­£å®æ•°$$\lambda > 0$$ï¼Œ$$\mathbf{I}$$æ˜¯ä¸€ä¸ªå•ä½çŸ©é˜µã€‚å“ï¼Ÿè¿™ä¹ˆä¸€æ“ä½œï¼Œå‘ç°äº†ä¸€äº›æœ‰è¶£çš„äº‹æƒ…ï¼š

1. **å½“$$\lambda = 0$$  æ—¶**ï¼Œé‚£LMç®—æ³•å°±å˜æˆäº†**GNç®—æ³•**äº†
2. **å½“$$\lambda  \to \infty$$æ—¶**ï¼Œæˆ‘ä»¬æŠŠ$$\Delta \mathbf{p}$$æ˜¾å¼å†™å‡ºæ¥ï¼Œå¯ä»¥çœ‹åˆ°LMç®—æ³•å°±å˜æˆäº†**æ¢¯åº¦ä¸‹é™æ³•**
3. **å½“ $$0< \lambda < \infty$$æ—¶ï¼Œ**LMç®—æ³•çš„è¿­ä»£æ­¥é•¿**ä»‹äºGNç®—æ³•ä¸æ¢¯åº¦ä¸‹é™æ³•ä¹‹é—´**ã€‚

è¿™æ ·æˆ‘ä»¬å¯ä»¥çœ‹å‡ºLMä¼˜åŒ–é€šè¿‡åœ¨å¢é‡æ–¹ç¨‹ä¸­å¢åŠ ä¸€ä¸ªæ‹‰æ ¼æœ—æ—¥ä¹˜å­$$\lambda$$æ¥æ”¹å–„GNæ–¹æ³•ï¼Œé¿å…ç”±äº$$\Delta \mathbf{p}$$è¿‡å¤§ï¼Œä¼˜åŒ–è§£è´¨é‡ä¸ç¨³å®šçš„é—®é¢˜ã€‚åœ¨ä¸€æ¬¡è¿­ä»£ä¸­ï¼ŒÂ $$\mathbf{H}$$å’Œ$$\mathbf{g}$$æ˜¯ä¸å˜çš„ï¼Œå¦‚æœæˆ‘ä»¬å‘è§‰è§£å‡ºçš„$$\Delta \mathbf{p}$$è¿‡å¤§ï¼Œå°±é€‚å½“è°ƒå¤§$$\lambda$$ï¼Œå¹¶é‡æ–°è®¡ç®—å¢é‡æ–¹ç¨‹ï¼Œä»¥è·å¾—ç›¸å¯¹å°ä¸€äº›çš„$$\Delta \mathbf{p}$$ï¼›åè¿‡æ¥ï¼Œå¦‚æœå‘è§‰è§£å‡ºçš„$$\Delta \mathbf{p}$$åœ¨åˆç†çš„èŒƒå›´å†…ï¼Œåˆ™é€‚å½“å‡å°$$\lambda$$ï¼Œå‡å°åçš„$$\lambda$$å°†ç”¨äºä¸‹æ¬¡è¿­ä»£ï¼Œç›¸å½“äºå…è®¸ä¸‹æ¬¡è¿­ä»£æ—¶$$\Delta \mathbf{p}$$æœ‰æ›´å¤§çš„å–å€¼ï¼Œä»¥å°½å¯èƒ½åœ°åŠ å¿«æ”¶æ•›é€Ÿåº¦ã€‚**é€šè¿‡è¿™æ ·çš„è°ƒæ§ï¼ŒLMç®—æ³•å³ä¿è¯äº†æ”¶æ•›çš„ç¨³å®šæ€§ï¼ŒåˆåŠ å¿«äº†æ”¶æ•›é€Ÿåº¦ã€‚**ä¸€åˆ‡éƒ½å¾ˆniceï¼

> #### ä¸è¿‡è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬*å¦‚ä½•åˆ¤æ–­$$\Delta \mathbf{p}$$æ˜¯å¦æ˜¯åˆç†çš„å‘¢*ï¼Ÿ
>   æˆ‘ä»¬å¯ä»¥*å®šä¹‰ä¸€ä¸ªæ€»ä½“çš„loss*ï¼Œæ¥åˆ¤æ–­$$\Delta \mathbf{p}$$çš„å¥½åï¼Œå¯¹äºå…¬å¼ï¼ˆ3ï¼‰è¿™æ ·ä¸€ä¸ªä¼˜åŒ–é—®é¢˜æ¥è¯´ï¼Œä¸€èˆ¬$$loss = \sum \mathbf{d}_{ij}$$ï¼Œæˆ‘ä»¬ä¼˜åŒ–çš„ç›®æ ‡å½“ç„¶æ˜¯è®©lossæœ€å°ã€‚å¦‚æœåŠ ä¸Š$$\Delta \mathbf{p}$$ålossåè€Œå¢å¤§äº†ï¼Œå°±è¯æ˜$$\Delta \mathbf{p}$$è¶…å‡ºäº†ç½®ä¿¡åŒºé—´ï¼Œæˆ‘ä»¬éœ€è¦è°ƒå¤§$$\lambda$$ï¼Œé‡æ–°è®¡ç®—å¢é‡$$\Delta \mathbf{p}$$ï¼›å¦‚æœlosså˜å°ï¼Œè¯æ˜$$\Delta \mathbf{p}$$åœ¨åˆç†åŒºé—´å†…ï¼Œè°ƒå°$$\lambda$$ï¼Œç®—æ³•ç»§ç»­ã€‚
{: .block-tip}

ç»¼ä¸Šæ‰€è¿°ï¼ŒLMç®—æ³•çš„æµç¨‹å¦‚ä¸‹:

<div class="row mt-3">
    <div class="col-sm mt-3 mt-md-0">
        {% include figure.liquid loading="eager" path="assets/img/post_img/ä»¥SLAMerè§’åº¦çœ‹å¾…GNå’ŒLMç®—æ³•/LM.png" class="img-fluid rounded z-depth-1" %}
    </div>
</div>
<div class="caption">
    LMç®—æ³•çš„åŸºæœ¬æµç¨‹
</div>
# å‚è€ƒèµ„æ–™

[é«˜æ–¯-ç‰›é¡¿ä¼˜åŒ–ç®—æ³• & L-Mä¼˜åŒ–ç®—æ³•é€è¡Œæ¨å¯¼](https://zhuanlan.zhihu.com/p/372136565?utm_id=0)

[è§†è§‰SLAMç¬”è®°--ç¬¬4ç¯‡: é«˜æ–¯ç‰›é¡¿æ³•(GN)å’Œåˆ—æ–‡ä¼¯æ ¼-é©¬å¤¸ç‰¹ç®—æ³•(LM)](https://blog.csdn.net/qq_37568167/article/details/105972628)

[é«˜æ–¯ç‰›é¡¿æ³•è¯¦è§£](https://blog.csdn.net/qq_42138662/article/details/109289129)

[LMä¼˜åŒ–ç®—æ³•](https://blog.csdn.net/mppcasc/article/details/119491223)

[L-Mæ–¹æ³•-ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/L-M%E6%96%B9%E6%B3%95/2652511)

ä¹¦ç±ï¼šã€Šè§†è§‰slamåå››è®²ã€‹ï¼Œã€Šæœ€ä¼˜åŒ–ç†è®ºä¸ç®—æ³•ã€‹ç¬¬äºŒç‰ˆ